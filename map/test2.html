<html>
<head lang="en">
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=no"
          name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <title>浏览器中获取当前经纬度</title>
    <script src="baiduposition.js"></script>
</head>
<body>
<div class="app-view">
    <a style="cursor: pointer;" οnclick="baiduPosition(35);" class="z-sel"><span>获取经纬度</span></a>
</div>
<script src="http://api.map.baidu.com/api?v=2.0&ak=vPAyDM3L3XNT1cBgGBINilagXF7CvD3V"></script>
<script type="text/javascript">
    //获取当前位置
    var geolocation = new BMap.Geolocation();
    geolocation.getCurrentPosition(function(r){
        if(this.getStatus() == BMAP_STATUS_SUCCESS){
            mk = new BMap.Marker(r.point);
            getAddress(r.point);
        }else {
            alert('failed'+this.getStatus());
        }
    });
    //获取地址信息，设置地址label
    function getAddress(point){
        var gc = new BMap.Geocoder();
        gc.getLocation(point, function(rs){
            var addComp = rs.addressComponents;
            var address =  addComp.province +  addComp.city + addComp.district + addComp.street + addComp.streetNumber;//获取地址
            console.log(address);
        });

    }
</script>
<script type="text/javascript">
    //该js函数是必须要的不然要报错
    function positions(json, cid) {
        //可以获取到了地理位置，跳转页面，然后在跳转的页面在获取经纬度的值
        //window.location.href = "./index.php?i=5&c=entry&do=list&m=weilive&cid=" + cid + "&lng=" + json['lng'] + "&lat=" + json['lat'];
        //alert(json['lng']);
    }
</script>
</body>
</html>